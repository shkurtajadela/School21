## Part 1. Установка ОС
**== Задание ==**
##### Установить **Ubuntu 20.04 Server LTS** без графического интерфейса. (Используем программу для виртуализации - VirtualBox)
- Графический интерфейс должен отсутствовать.
- Узнайте версию Ubuntu, выполнив команду \
`cat /etc/issue.`
- Вставьте скриншот с выводом команды.

![cat /etc/issue](/src/img/1.png)

## Part 2. Создание пользователя
**== Задание ==**
##### Создать пользователя, отличного от пользователя, который создавался при установке. Пользователь должен быть добавлен в группу `adm`.
- Вставьте скриншот вызова команды для создания пользователя.
- Новый пользователь должен быть в выводе команды \
`cat /etc/passwd`
- Вставьте скриншот с выводом команды.

![](/src/img/2.png)

## Part 3. Настройка сети ОС
**== Задание ==**
##### Задать название машины вида user-1  
С помощью команды `sudo hostname user-1` изменяем название машины

![](/src/img/3.1.png)
##### Установить временную зону, соответствующую вашему текущему местоположению.  
В начале проверяем какая у нас временная зона `sudo timedatectl`
Потом изменяем ее `sudo timedatectl set-timezone Europe/Moscow`

![](/src/img/3.2.png)
##### Вывести названия сетевых интерфейсов с помощью консольной команды.
lo (loopback device) – виртуальный интерфейс, присутствующий по умолчанию в любом Linux. Он используется для отладки сетевых программ и запуска серверных приложений на локальной машине. С этим интерфейсом всегда связан адрес 127.0.0.1. У него есть dns-имя – localhost.

![](/src/img/3.3.png)

##### Используя консольную команду получить ip адрес устройства, на котором вы работаете, от DHCP сервера. 
DHCP – Dynamic Host Configuration Protocol (протокол динамической конфигурации хоста). Это механизм динамической выдачи IP-адресов в сети. IP-адрес (Internet Protocol) - способ адрессации устройств по сети. У каждого устройства свой уникальный ip-адрес. Без DHCP-сервера, администратору пришлось бы вручную настраивать статический IP-адрес каждого устройства, что при большом количестве устройст могло бы привести к ошибке.

![](/src/img/3.4.png)
##### Определить и вывести на экран внешний ip-адрес шлюза (ip) и внутренний IP-адрес шлюза, он же ip-адрес по умолчанию (gw). 
Шлюз - это один из типов маршрутизаторов. Маршрутизаторы соединяют несколько сетей и выполняют функции маршрутизации пакетов. Шлюзы осуществляют маршрутизацию на сетевом уровне.
Найдем внешний ip-адрес `curl config.io`
Найдем внутренней ip-адрес `hostname -I`

Как внешний, так и внутренний ip-адреса предназначены для одной цели, но разница в области видимости. Внешний адрес шлюза используется по всему Интернету, когда внутренний используется только в приватной сети к устройстам, подключенным к ней.

![](/src/img/3.5.png)
##### Задать статичные (заданные вручную, а не полученные от DHCP сервера) настройки ip, gw, dns (использовать публичный DNS серверы, например 1.1.1.1 или 8.8.8.8). 

Перейдем к файлу конфигурации Netplan. В данном случае это файл `00-installer-config.yaml`. Откроем его в текстовом редакторе vim с помощью команды `sudo vim /etc/netplan/00-installer-config.yaml`. Зададим статические настройки (как на картинке). 
Для применения изменений используем команду `netplan apply`.

![](/src/img/3.6.png)

##### Перезагрузить виртуальную машину. Убедиться, что статичные сетевые настройки (ip, gw, dns) соответствуют заданным в предыдущем пункте.  
![](/src/img/3.7.png)


## Part 4. Обновление ОС
**== Задание ==**
##### Обновить системные пакеты до последней на момент выполнения задания версии.  
![](/src/img/4.png)

## Part 5. Использование команды **sudo**
**== Задание ==**
##### Разрешить пользователю, созданному в [Part 2](#part-2-создание-пользователя), выполнять команду sudo.

- В отчёте объяснить *истинное* назначение команды sudo (про то, что это слово - "волшебное", писать не стоит).  
*Ответ:* Команда sudo - substitute user and do, подменить пользователя и выполнить. Главное назначение sudo — это выполнить команду от имени другого пользователя, обычно от root. Смысл выполнения команды от root в том, что у него повышенные права доступа и, применяя sudo, обычный пользователь может выполнить те действия, на которые у него недостаточно прав.
- Поменять hostname ОС от имени пользователя, созданного в пункте [Part 2](#part-2-создание-пользователя) (используя sudo).
Наделим пользователя правами sudo `sudo usermod -aG sudo adela`. 
Выполним изменение названия машины и проверку сохранения изменений. После этого вызовем `reboot`

![](/src/img/5.png)

## Part 6. Установка и настройка службы времени
**== Задание ==**
##### Настроить службу автоматической синхронизации времени.  
- Вывести время, часового пояса, в котором вы сейчас находитесь.
- Вывод следующей команды должен содержать `NTPSynchronized=yes`: \
  `timedatectl show`

![](/src/img/6.png)

## Part 7. Установка и использование текстовых редакторов 
**== Задание ==**
##### Установить текстовые редакторы **VIM** (+ любые два по желанию **NANO**, **MCEDIT**, **JOE** и т.д.)  
Установка текстовых редакторов.
`sudo apt install vim`
`sudo apt install nano`
`sudo apt install mcedit`
##### Используя каждый из трех выбранных редакторов, создайте файл *test_X.txt*, где X -- название редактора, в котором создан файл. Напишите в нём свой никнейм, закройте файл с сохранением изменений.  
- В отчёт вставьте скриншоты:
  - Из каждого редактора с содержимым файла перед закрытием.
- В отчёте укажите, что сделали для выхода с сохранением изменений.

*Vim:*
![](/src/img/7.1vim.png)
Для выхода с сохранением нужно нажать Esc, затем написать `:wq`, что означает write and quit.

*Nano:*
![](/src/img/7.1nano.png)
Для выхода с сохранением нужно выполнить Ctrl+S и Ctrl+X

*MCEDIT:*
![](/src/img/7.1mcedit.png)
Для выхода с сохранением необходимо нажать F10 и выбрать yes.
##### Используя каждый из трех выбранных редакторов, откройте файл на редактирование, отредактируйте файл, заменив никнейм на строку "21 School 21", закройте файл без сохранения изменений.
- В отчёт вставьте скриншоты:
    - Из каждого редактора с содержимым файла после редактирования.
- В отчёте укажите, что сделали для выхода без сохранения изменений.

*Vim:*
![](/src/img/7.2vim.png)
Для выхода без сохранения нужно нажать Esc, затем написать :q!. Проверим, что изменения не сохранились.

*Nano:*
![](/src/img/7.2nano.png)
Для выхода без сохранения нужно нажать Esc, затем Ctrl + X. Проверим, что изменения не сохранились.

*MCEDIT:*
![](/src/img/7.2mcedit.png)
Для выхода без сохранения нужно нажать F10, затем выбрать No.
##### Используя каждый из трех выбранных редакторов, отредактируйте файл ещё раз (по аналогии с предыдущим пунктом), а затем освойте функции поиска по содержимому файла (слово) и замены слова на любое другое.
- В отчёт вставьте скриншоты:
    - Из каждого редактора с результатами поиска слова.
    - Из каждого редактора с командами, введёнными для замены слова на другое.

*Vim:*
![](/src/img/7.3vim.png)
Поиск: `Esc + /<word_to_search>`

Замена: `:%s/<change_this>/<to_this>`
![](/src/img/7.4vim.png)
![](/src/img/7.4vim.png)

*Nano:*
![](/src/img/7.3nano.png)
Поиск: `Ctrl + W`

![](/src/img/7.4nano.png)
Замена: `Ctrl + \`
![](/src/img/7.4.2nano.png)
![](/src/img/7.4.3nano.png)

*MCEDIT:*
![](/src/img/7.3mcedit.png)
Поиск: `F7`
![](/src/img/7.3.2mcedit.png)
Замена: `F4`
![](/src/img/7.4mcedit.png)

## Part 8. Установка и базовая настройка сервиса **SSHD**
**== Задание ==**

##### Установить службу SSHd.  
Установим службу SSHd с помощью команды `sudo apt install openssh-server`.

![](/src/img/8.1.png)
##### Добавить автостарт службы при загрузке системы.  
Изменить автостарт можно с помощью команды `sudo systemctl enable ssh`

![](/src/img/8.2.png)
##### Перенастроить службу SSHd на порт 2022.
Для перенаструйти службы SSHd откроем файл sshd_config командой `sudo nano /etc/ssh/sshd_config`.  
![](/src/img/8.3.png)

##### Используя команду ps, показать наличие процесса sshd. Для этого к команде нужно подобрать ключи.
- `ps` (показывает запущенные процессы, выполняемые пользователем в окне терминала);
- `ps -e` или ps -A (Чтобы просмотреть все запущенные процессы);
- ps -d (Чтобы показать все процессы, кроме лидеров сессии);
- ps -d -N (можно инвертировать вывод с помощью переключателя -N. Например, если хочу вывести только лидеров сеансов)
- ps T (увидеть только процессы, связанные с этим терминалом);
- ps r (просмотреть все работающие (running) процессы);
- ps -p 'pid' (если вы знаете идентификатор процесса PID, вы можете просто использовать следующую команду, для вывода процесса с этим 'pid');
- ps -p 'pid1' 'pid2'
- ps U 'userlist' (найти все процессы, выполняемые конкретным пользователем);

![](/src/img/8.4.png)

##### Перезагрузить систему.
![](/src/img/8.5.png)

## Part 9. Установка и использование утилит **top**, **htop**
**== Задание ==**
##### Установить и запустить утилиты top и htop.  
- По выводу команды top определить и написать в отчёте:
  - uptime: 5 min
  - количество авторизованных пользователей: 1
  - общую загрузку системы: 0.00
  - общее количество процессов: 123
  - загрузку cpu: 0.2%
  - загрузку памяти: 169 из 3927.5
  - pid процесса занимающего больше всего памяти: 709, 1114
  - pid процесса, занимающего больше всего процессорного времени: 1

![](/src/img/9.1.png)

- В отчёт вставить скрин с выводом команды htop:
  - отсортированному по PID,
  ![](/src/img/9.2.png)
  
   - отсортированному по PERCENT_CPU, 
  ![](/src/img/9.3.png)
   - отсортированному по PERCENT_MEM, 
  ![](/src/img/9.4.png)
   - отсортированному по TIME
  ![](/src/img/9.5.png)
  - отфильтрованному для процесса sshd
  ![](/src/img/9.6.png)
  - с процессом syslog, найденным, используя поиск 
  ![](/src/img/9.7.png)
  - с добавленным выводом hostname, clock и uptime  
  ![](/src/img/9.8.png)

## Part 10. Использование утилиты **fdisk**
**== Задание ==**
##### Запустить команду fdisk -l.
- Название диска: QEMU HARDDISK
- Размер диска: 64 Гигабайт
- Количество секторов: 134217728
- Размер swap: 512 байт

![](/src/img/10.png)

## Part 11. Использование утилиты **df** 
**== Задание ==**

##### Запустить команду df.  
- В отчёте написать для корневого раздела (/):
  - размер раздела: 31270768
  - размер занятого пространства: 6619844
  - размер свободного пространства: 23036896
  - процент использования: 23%
  - единица измерения: килобайт.  

##### Запустить команду df -Th.
- В отчёте написать для корневого раздела (/):
    - размер раздела: 30Гб
    - размер занятого пространства: 6.4ГБ
    - размер свободного пространства: 22ГБ
    - процент использования: 23%
    - тип файловой системы для раздела - ext4. 
![](/src/img/11.png)


## Part 12. Использование утилиты **du**
**== Задание ==**
##### Запустить команду du.
![](/src/img/12.1.png)
##### Вывести размер папок /home, /var, /var/log (в байтах, в человекочитаемом виде)
![](/src/img/12.2.png)
##### Вывести размер всего содержимого в /var/log (не общее, а каждого вложенного элемента, используя *)
![](/src/img/12.3.png)


## Part 13. Установка и использование утилиты **ncdu**
**== Задание ==**
##### Установить утилиту ncdu.
![](/src/img/13.1.png)
##### Вывести размер папок /home, /var, /var/log.
![](/src/img/13.2.png)
![](/src/img/13.3.png)
![](/src/img/13.4.png)
- Размеры должны примерно совпадать с полученными в [Part 12](#part-12-использование-утилиты-du).


## Part 14. Работа с системными журналами
**== Задание ==**
##### Открыть для просмотра:
##### 1. /var/log/dmesg
##### 2. /var/log/syslog
##### 3. /var/log/auth.log  

- Написать в отчёте 
  - время последней успешной авторизации: 17:39, 
  - имя пользователя: kizzywyn 
  - метод входа в систему: login

![](/src/img/14.1.png)

- Перезапустить службу SSHd.
- Вставить в отчёт скрин с сообщением о рестарте службы (искать в логах).

![](/src/img/14.3.png)

## Part 15. Использование планировщика заданий **CRON**
**== Задание ==**
##### Используя планировщик заданий, запустите команду uptime через каждые 2 минуты.
`crontab -e`

![](/src/img/15.1.png)

- Найти в системных журналах строчки (минимум две в заданном временном диапазоне) о выполнении.
- Вывести на экран список текущих заданий для CRON.
![](/src/img/15.2.png)

##### Удалите все задания из планировщика заданий.
![](/src/img/15.3.png)
